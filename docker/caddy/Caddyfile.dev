{
    auto_https off
}

:80 {
    root * /srv/app/public

    file_server

    # API requests + Admin page -> Symfony (PHP-FPM)
    @symfony path /assets/* /api/* /admin/* /_wdt/* /_profiler/*
    php_fastcgi @symfony php:9000

    # All other requests -> React's Vite dev server
    @frontend not path /assets/* /api/* /admin/* /_wdt/* /_profiler/*
    reverse_proxy @frontend frontend:5173
}